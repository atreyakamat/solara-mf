(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{1033:function(e,s,t){Promise.resolve().then(t.bind(t,61170)),Promise.resolve().then(t.bind(t,21551))},61170:function(e,s,t){"use strict";t.d(s,{SimulatorClient:function(){return K}});var a=t(57437),l=t(2265),r=t(92371),n=t(86662),i=t(79820),o=t(12381),d=t(40279),c=t(38846),x=t(93448);let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsxs)(c.fC,{ref:s,className:(0,x.cn)("relative flex w-full touch-none select-none items-center",t),...l,children:[(0,a.jsx)(c.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,a.jsx)(c.e6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(c.bU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});m.displayName=c.fC.displayName;var u=t(23340),h=t(47625),f=t(5481),j=t(56940),g=t(97059),p=t(62994),v=t(8147),b=t(23263),N=t(22190),y=t(75169),w=t(3574),k=t(20407),C=t(32489),S=t(73247),A=t(99397),Z=t(18930),L=t(76865),I=t(91804),R=t(73618),F=t(70525),z=t(40370),M=t(96215);let O=e=>{let s={"Large Cap":0,"Mid Cap":0,"Small Cap":0};return e.forEach(e=>{var t,a,l;(null===(t=e.subCategory)||void 0===t?void 0:t.includes("Large"))?s["Large Cap"]+=1:(null===(a=e.subCategory)||void 0===a?void 0:a.includes("Mid"))?s["Mid Cap"]+=1:(null===(l=e.subCategory)||void 0===l?void 0:l.includes("Small"))?s["Small Cap"]+=1:s["Large Cap"]+=.5}),Object.entries(s).map(s=>{let[t,a]=s;return{name:t,value:Math.round(a/(e.length||1)*100)}})},P=e=>Object.entries({IT:25,Banking:20,Pharma:15,Auto:12,FMCG:10,Others:18}).map(e=>{let[s,t]=e;return{name:s,value:t}}),D=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#6366f1"],T=["#3b82f6","#10b981","#f59e0b"],V=e=>{let{payload:s}=e;return(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:null==s?void 0:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.value})]},s))})};function E(e){let{onAdd:s,onClose:t}=e,[r,c]=(0,l.useState)(""),{data:x,isLoading:m}=(0,n.W)({search:r||void 0});return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-start justify-center pt-20 animate-in fade-in",children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-lg p-6 shadow-2xl m-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Add Fund to Portfolio"}),(0,a.jsx)(o.z,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(C.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)(S.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(d.I,{value:r,onChange:e=>c(e.target.value),placeholder:"Search by fund name...",className:"pl-9",autoFocus:!0})]}),(0,a.jsx)("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:m?(0,a.jsx)("div",{className:"py-8 text-center text-muted-foreground text-sm",children:"Searching..."}):(null==x?void 0:x.length)===0?(0,a.jsx)("div",{className:"py-8 text-center text-muted-foreground text-sm",children:"No funds found"}):null==x?void 0:x.map(e=>(0,a.jsxs)("button",{onClick:()=>{s(e),t()},className:"w-full p-3 rounded-lg border border-border hover:bg-secondary transition-colors text-left",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:e.category}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{className:"text-accent",children:[e.return1y,"% 1Y"]})]})]},e.id))})]})})}function K(){let[e,s]=(0,l.useState)([10]),[t,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),{items:C,addItem:S,removeItem:K,updateAllocation:Y,balanceAllocations:_,clearPortfolio:G,simulationResult:q,setSimulationResult:B}=(0,r.X)(),W=C.reduce((e,s)=>e+s.allocation,0),U=C.reduce((e,s)=>e+s.amount,0),H=C.some(e=>e.allocation>40),Q=(0,l.useMemo)(()=>O(C.map(e=>e.fund)),[C]),X=(0,l.useMemo)(()=>P(C.map(e=>e.fund)),[C]),J=async()=>{if(100!==W){(0,u.Am)({title:"Error",description:"Total allocation must be 100%",variant:"destructive"});return}c(!0),await new Promise(e=>setTimeout(e,1e3));let s=C.reduce((e,s)=>e+Number(s.fund.return3y||12)*s.allocation/100,0),t=[],a=0,l=0,r=s/100/12;for(let s=0;s<=e[0];s++){if(s>0)for(let e=0;e<12;e++)l=l*(1+r)+U,a+=U;t.push({year:s,value:Math.round(l),invested:Math.round(a)})}B({projectedValue:t[t.length-1].value,investedAmount:t[t.length-1].invested,totalReturns:t[t.length-1].value-t[t.length-1].invested,cagr:s,yearlyData:t,diversification:{sectors:X.reduce((e,s)=>({...e,[s.name]:s.value}),{}),marketCap:Q.reduce((e,s)=>({...e,[s.name]:s.value}),{})},shortTerm:{m3:"₹".concat((3*U).toLocaleString("en-IN")),m6:"₹".concat((6*U).toLocaleString("en-IN"))}}),c(!1),(0,u.Am)({title:"Simulation Complete",description:"Your portfolio analysis is ready!"})};return(0,a.jsxs)("div",{className:"space-y-8 max-w-7xl mx-auto",children:[t&&(0,a.jsx)(E,{onAdd:e=>{S(e,5e3,"SIP"),_(),(0,u.Am)({title:"Fund Added",description:"".concat(e.name," added to your portfolio.")})},onClose:()=>n(!1)}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-display font-bold",children:"Portfolio Simulator"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Build and simulate your dream portfolio"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.z,{variant:"outline",onClick:()=>n(!0),children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Add Fund"]}),C.length>0&&(0,a.jsxs)(o.z,{variant:"outline",onClick:G,className:"text-destructive hover:text-destructive",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]}),H&&(0,a.jsx)(i.Zb,{className:"p-4 bg-orange-50 dark:bg-orange-950/20 border-orange-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-orange-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-orange-800 dark:text-orange-200",children:"Concentration Risk Detected"}),(0,a.jsx)("p",{className:"text-sm text-orange-600 dark:text-orange-300",children:"One or more funds have over 40% allocation. Consider diversifying."})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5 text-primary"}),"Your Funds"]}),C.length>1&&(0,a.jsx)(o.z,{variant:"secondary",size:"sm",onClick:_,children:"Auto-balance"})]}),0===C.length?(0,a.jsxs)("div",{className:"py-16 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(A.Z,{className:"w-8 h-8 text-primary"})}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"No funds in portfolio"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Start by adding funds to simulate your investment journey."}),(0,a.jsxs)(o.z,{onClick:()=>n(!0),children:[(0,a.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Add Your First Fund"]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[C.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-secondary/50 border border-border",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-sm truncate",children:e.fund.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.fund.category," • ",e.fund.return1y,"% 1Y"]})]}),(0,a.jsx)(o.z,{variant:"ghost",size:"icon",className:"shrink-0 text-muted-foreground hover:text-destructive",onClick:()=>K(e.id),children:(0,a.jsx)(Z.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Allocation"}),(0,a.jsxs)("span",{className:(0,x.cn)("font-bold",e.allocation>40?"text-orange-500":"text-foreground"),children:[e.allocation,"%"]})]}),(0,a.jsx)(m,{value:[e.allocation],max:100,step:5,onValueChange:s=>{let[t]=s;return Y(e.id,t)},className:"w-full"})]}),(0,a.jsxs)("div",{className:"w-24",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Monthly"}),(0,a.jsxs)("div",{className:"font-medium",children:["₹",e.amount.toLocaleString("en-IN")]})]})]})]},e.id)),(0,a.jsx)("div",{className:(0,x.cn)("p-4 rounded-xl border",100===W?"bg-green-50 dark:bg-green-950/20 border-green-200":"bg-orange-50 dark:bg-orange-950/20 border-orange-200"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Allocation"}),(0,a.jsxs)("span",{className:(0,x.cn)("text-xl font-bold",100===W?"text-green-600":"text-orange-600"),children:[W,"%"]})]})})]})]}),(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"w-5 h-5 text-primary"}),"Investment Horizon"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Duration"}),(0,a.jsxs)("span",{className:"font-bold text-xl",children:[e[0]," years"]})]}),(0,a.jsx)(m,{value:e,min:1,max:30,step:1,onValueChange:s}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"1 year"}),(0,a.jsx)("span",{children:"30 years"})]})]}),(0,a.jsx)(o.z,{className:"w-full mt-6 h-12 text-lg font-semibold shadow-lg shadow-primary/25",onClick:J,disabled:0===C.length||100!==W||d,children:d?"Simulating...":"Run Simulation"})]}),q&&(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[(0,a.jsx)(F.Z,{className:"w-5 h-5 text-primary"}),"Projected Growth"]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-primary/10",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Projected Value"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["₹",q.projectedValue.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-secondary",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Invested"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["₹",q.investedAmount.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-accent/10",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Returns"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-accent",children:["₹",q.totalReturns.toLocaleString("en-IN")]})]})]}),(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(f.T,{data:q.yearlyData,children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),(0,a.jsxs)("linearGradient",{id:"colorInvested",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--muted-foreground))",stopOpacity:.2}),(0,a.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--muted-foreground))",stopOpacity:0})]})]}),(0,a.jsx)(j.q,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,a.jsx)(g.K,{dataKey:"year",tick:{fontSize:12},tickFormatter:e=>"Y".concat(e),stroke:"hsl(var(--muted-foreground))"}),(0,a.jsx)(p.B,{tick:{fontSize:10},tickFormatter:e=>"₹".concat((e/1e5).toFixed(0),"L"),stroke:"hsl(var(--muted-foreground))"}),(0,a.jsx)(v.u,{formatter:e=>["₹".concat(e.toLocaleString("en-IN")),""],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"8px"}}),(0,a.jsx)(b.u,{type:"monotone",dataKey:"invested",stroke:"hsl(var(--muted-foreground))",strokeDasharray:"5 5",fillOpacity:1,fill:"url(#colorInvested)",name:"Invested"}),(0,a.jsx)(b.u,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:3,fillOpacity:1,fill:"url(#colorValue)",name:"Value"}),(0,a.jsx)(N.D,{})]})})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Portfolio Summary"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Funds"}),(0,a.jsx)("span",{className:"font-bold",children:C.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Monthly SIP"}),(0,a.jsxs)("span",{className:"font-bold",children:["₹",U.toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Expected CAGR"}),(0,a.jsxs)("span",{className:"font-bold text-accent",children:[C.length>0?(C.reduce((e,s)=>e+Number(s.fund.return3y||12)*s.allocation,0)/100).toFixed(1):0,"%"]})]})]})]}),C.length>0&&(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(z.Z,{className:"w-5 h-5 text-primary"}),"Market Cap Mix"]}),(0,a.jsx)("div",{className:"h-[200px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.u,{children:[(0,a.jsx)(w.b,{data:Q,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:5,dataKey:"value",children:Q.map((e,s)=>(0,a.jsx)(k.b,{fill:T[s%T.length]},"cell-".concat(s)))}),(0,a.jsx)(N.D,{content:(0,a.jsx)(V,{})}),(0,a.jsx)(v.u,{formatter:e=>["".concat(e,"%"),""]})]})})})]}),C.length>0&&(0,a.jsxs)(i.Zb,{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"w-5 h-5 text-primary"}),"Sector Allocation"]}),(0,a.jsx)("div",{className:"h-[200px]",children:(0,a.jsx)(h.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.u,{children:[(0,a.jsx)(w.b,{data:X,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:3,dataKey:"value",children:X.map((e,s)=>(0,a.jsx)(k.b,{fill:D[s%D.length]},"cell-".concat(s)))}),(0,a.jsx)(N.D,{content:(0,a.jsx)(V,{})}),(0,a.jsx)(v.u,{formatter:e=>["".concat(e,"%"),""]})]})})})]})]})]})]})}},86662:function(e,s,t){"use strict";t.d(s,{W:function(){return l}});var a=t(20016);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.a)({queryKey:["funds",e],queryFn:async()=>{let s=new URLSearchParams;e.search&&s.set("search",e.search),e.category&&"All"!==e.category&&s.set("category",e.category),e.riskLevel&&"All"!==e.riskLevel&&s.set("riskLevel",e.riskLevel),e.minRating&&s.set("minRating",e.minRating.toString());let t=await fetch("/api/funds?".concat(s.toString()));if(!t.ok)throw Error("Failed to fetch funds");return t.json()},staleTime:6e4})}}},function(e){e.O(0,[151,432,572,106,417,369,448,971,117,744],function(){return e(e.s=1033)}),_N_E=e.O()}]);